# The part with the volumes is from this repo:
# https://github.com/h4l/dev-container-docker-compose-volume-or-bind

version: '3.8'
services:
  devcontainer:
    build:
      context: .
      dockerfile: ./Dockerfile
    # The container should remain running after startup
    volumes:
      - ${WORKSPACE_SOURCE:?}:${WORKSPACE_TARGET:?}
    command: /bin/sh -c "while sleep 1000; do :; done"
    env_file:
      # If you need to access the WORKSPACE_* envars in the container
      - .env

volumes:
  # $WORKSPACE_SOURCE is "devcontainer-volume" when the workspace is in a
  # volume, and devcontainer-volume is an alias for the actual external volume.
  # In bind-mount workspaces, it's an empty, unused volume created by compose.
  devcontainer-volume:
    name: ${WORKSPACE_CONTAINER_VOLUME_SOURCE:-not-used-in-bind-mount-workspace}
    external: ${WORKSPACE_IS_CONTAINER_VOLUME:?}
